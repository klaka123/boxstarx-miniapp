<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoxStarX üöÄ –°–∞–º–æ–ª—ë—Ç –∏ –ö–µ–π—Å—ã</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: 'Arial', sans-serif;
            color: #fff;
            height: 100%;
        }

        /* Canvas –¥–ª—è –∑–≤–µ–∑–¥ (–í–ê–® –ö–†–ê–°–ò–í–´–ô –§–û–ù) */
        #starCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            display: block;
            pointer-events: none; /* –í–∞–∂–Ω–æ: –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–∫–≤–æ–∑—å canvas */
        }

        /* HUD - –ø–∞–Ω–µ–ª—å —Å–≤–µ—Ä—Ö—É */
        .hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            box-sizing: border-box;
            border-bottom: 1px solid rgba(255,215,0,0.3);
        }

        .balance { 
            font-size: 1.2rem; 
            text-shadow: 0 0 10px gold;
        }
        
        .bet-menu input { 
            width: 60px; 
            padding: 5px; 
            margin-right: 5px; 
            background: rgba(0,0,0,0.7);
            border: 1px solid gold;
            color: white;
            border-radius: 5px;
        }
        
        .bet-menu button { 
            padding: 5px 15px; 
            cursor: pointer; 
            background: gold;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        .bet-menu button:hover {
            transform: scale(1.05);
            background: #ffd700;
        }

        /* –ü–æ–ª–µ –¥–ª—è —Å–∞–º–æ–ª–µ—Ç–∞ */
        .airfield {
            position: relative;
            width: 100%;
            height: 200px;
            margin-top: 100px;
            overflow: hidden;
            border-bottom: 2px solid rgba(255,215,0,0.3);
        }

        .plane {
            position: absolute;
            left: -50px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            transition: left 0.1s linear;
            filter: drop-shadow(0 0 10px gold);
            z-index: 10;
        }

        .timer {
            text-align: center;
            margin-top: 10px;
            font-size: 1.2rem;
            text-shadow: 0 0 10px cyan;
            background: rgba(0,0,0,0.3);
            padding: 5px;
            border-radius: 20px;
            width: 200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* –ö–µ–π—Å—ã */
        .cases {
            display: flex;
            justify-content: space-around;
            margin-top: 50px;
            padding: 0 20px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .case {
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, #4b0082, #8a2be2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid gold;
            box-shadow: 0 0 20px rgba(255,215,0,0.3);
            text-align: center;
            padding: 10px;
            font-weight: bold;
            backdrop-filter: blur(5px);
        }

        .case:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 30px gold;
        }

        .case.opening {
            animation: rotateCase 1s ease forwards;
        }

        @keyframes rotateCase {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg); box-shadow: 0 0 50px white; }
            100% { transform: rotateY(360deg); }
        }

        /* –î–ª—è –∫—Ä–∞—Å–æ—Ç—ã - –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        body {
            padding-bottom: 30px;
        }
    </style>
</head>
<body>
    <!-- –ö–∞–Ω–≤–∞—Å –¥–ª—è –∑–≤–µ–∑–¥ (–í–ê–® –ö–û–î) -->
    <canvas id="starCanvas"></canvas>

    <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–í–ê–® –ö–û–î) -->
    <div class="hud">
        <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span>‚≠ê</div>
        <div class="bet-menu">
            –°—Ç–∞–≤–∫–∞: <input type="number" id="betAmount" min="10" value="10" step="10">‚≠ê
            <button id="startFlight">–°—Ç–∞—Ä—Ç!</button>
        </div>
    </div>

    <div class="airfield">
        <div id="plane" class="plane">‚úàÔ∏è</div>
    </div>

    <div class="timer" id="takeoffTimer">–í–∑–ª—ë—Ç —á–µ—Ä–µ–∑: 10</div>

    <div class="cases">
        <div class="case" data-case="50">üéÅ –ö–µ–π—Å 50‚≠ê</div>
        <div class="case" data-case="100">üéÅ –ö–µ–π—Å 100‚≠ê</div>
        <div class="case" data-case="500">üéÅ –ö–µ–π—Å 500‚≠ê</div>
    </div>

    <script>
        // ==================== 1. –ö–û–î –ó–í–ï–ó–î–ù–û–ì–û –ù–ï–ë–ê (–í–ê–® –ö–†–ê–°–ò–í–´–ô –§–û–ù) ====================
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('starCanvas');
            const ctx = canvas.getContext('2d');
            let width, height;
            let stars = [];
            let comets = [];
            const STAR_COUNT = 300;
            const COMET_COUNT = 3;

            function initStars() {
                stars = [];
                for (let i = 0; i < STAR_COUNT; i++) {
                    stars.push({
                        x: Math.random() * width,
                        y: Math.random() * height,
                        radius: Math.random() * 1.5 + 0.5,
                        speed: Math.random() * 0.5 + 0.2,
                        brightness: Math.random() * 0.5 + 0.5,
                        flickerSpeed: Math.random() * 0.02 + 0.005
                    });
                }
            }

            function initComets() {
                comets = [];
                for (let i = 0; i < COMET_COUNT; i++) {
                    comets.push({
                        x: Math.random() * width * 0.3,
                        y: Math.random() * height * 0.2,
                        length: Math.random() * 80 + 50,
                        speed: Math.random() * 4 + 3,
                        angle: Math.random() * 0.2 + 0.4,
                        brightness: 1
                    });
                }
            }

            function resizeCanvas() {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
                initStars();
                initComets();
            }

            function drawStars() {
                ctx.clearRect(0, 0, width, height);
                
                // –†–∏—Å—É–µ–º –æ–±—ã—á–Ω—ã–µ –∑–≤–µ–∑–¥—ã
                stars.forEach(star => {
                    star.y += star.speed;
                    if (star.y > height) {
                        star.y = 0;
                        star.x = Math.random() * width;
                    }
                    
                    star.brightness += star.flickerSpeed;
                    if (star.brightness > 1 || star.brightness < 0.3) {
                        star.flickerSpeed *= -1;
                    }
                    
                    ctx.globalAlpha = star.brightness;
                    ctx.fillStyle = 'white';
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                // –†–∏—Å—É–µ–º –∫–æ–º–µ—Ç—ã (–ø–∞–¥–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã)
                ctx.globalAlpha = 1;
                ctx.lineWidth = 2;
                comets.forEach(comet => {
                    comet.x += comet.speed * Math.cos(comet.angle);
                    comet.y += comet.speed * Math.sin(comet.angle);
                    
                    if (comet.y > height || comet.x > width) {
                        comet.x = Math.random() * width * 0.3;
                        comet.y = Math.random() * height * 0.2;
                    }
                    
                    // –•–≤–æ—Å—Ç –∫–æ–º–µ—Ç—ã
                    ctx.beginPath();
                    ctx.moveTo(comet.x, comet.y);
                    ctx.lineTo(comet.x - comet.length * Math.cos(comet.angle), 
                               comet.y - comet.length * Math.sin(comet.angle));
                    ctx.strokeStyle = `rgba(255, 255, 255, ${Math.random() * 0.5 + 0.5})`;
                    ctx.stroke();
                    
                    // –ì–æ–ª–æ–≤–∞ –∫–æ–º–µ—Ç—ã
                    ctx.beginPath();
                    ctx.arc(comet.x, comet.y, 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'white';
                    ctx.fill();
                });
                
                requestAnimationFrame(drawStars);
            }

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            drawStars();
        });

        // ==================== 2. –ö–û–î –ò–ì–†–´ (–°–ê–ú–û–õ–ï–¢ –ò –ö–ï–ô–°–´) ====================
        // (–≠—Ç–æ –≤–∞—à –∫–æ–¥, –Ω–µ–º–Ω–æ–≥–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
        let balance = 1000;
        let plane = document.getElementById("plane");
        let betInput = document.getElementById("betAmount");
        let balanceDisplay = document.getElementById("balance");
        let startBtn = document.getElementById("startFlight");
        let timerDisplay = document.getElementById("takeoffTimer");
        let planeInterval;
        let countdown = 10;

        function updateBalance() {
            balanceDisplay.innerText = balance;
        }

        // –¢–∞–π–º–µ—Ä –¥–æ –≤–∑–ª—ë—Ç–∞
        function startCountdown() {
            countdown = 10;
            timerDisplay.innerText = `–í–∑–ª—ë—Ç —á–µ—Ä–µ–∑: ${countdown}`;
            let cdInterval = setInterval(() => {
                countdown--;
                timerDisplay.innerText = `–í–∑–ª—ë—Ç —á–µ—Ä–µ–∑: ${countdown}`;
                if(countdown <= 0) {
                    clearInterval(cdInterval);
                    startFlight();
                }
            }, 1000);
        }

        // –õ–æ–≥–∏–∫–∞ —Å–∞–º–æ–ª–µ—Ç–∞
        function startFlight() {
            let bet = parseInt(betInput.value);
            if(bet > balance) { alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥!"); return; }
            if(bet < 10) { alert("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 10 –∑–≤–µ–∑–¥!"); return; }

            balance -= bet;
            updateBalance();

            let planeLeft = -50;
            let speed = 2;
            let multiplier = 1;
            let maxMultiplier = 20;
            let crashed = false;

            planeInterval = setInterval(() => {
                planeLeft += speed;
                plane.style.left = planeLeft + "px";
                multiplier += 0.01 + Math.random() * 0.02;

                if(Math.random() < 0.01 || multiplier >= maxMultiplier) {
                    crashed = true;
                    clearInterval(planeInterval);
                    if(multiplier < 1.1) {
                        alert(`üí• –°–∞–º–æ–ª–µ—Ç —É–ø–∞–ª! –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ ‚≠ê${bet}`);
                    } else {
                        let win = Math.floor(bet * multiplier);
                        balance += win;
                        alert(`‚ú® –°–∞–º–æ–ª–µ—Ç —É–ø–∞–ª –Ω–∞ ${multiplier.toFixed(2)}x! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ‚≠ê${win}`);
                    }
                    updateBalance();
                }
            }, 30);
        }

        // –ö–µ–π—Å—ã
        document.querySelectorAll(".case").forEach(c => {
            c.addEventListener("click", () => {
                let value = parseInt(c.dataset.case);
                c.classList.add("opening");
                setTimeout(() => {
                    let rand = Math.random() * 100;
                    let reward = 0;
                    if(value === 50) {
                        if(rand <= 70) reward = 25;
                        else if(rand <= 85) reward = 50;
                        else reward = 100;
                    } else if(value === 100) {
                        if(rand <= 70) reward = 50;
                        else if(rand <= 85) reward = 100;
                        else reward = 200;
                    } else if(value === 500) {
                        if(rand <= 70) reward = 200;
                        else if(rand <= 85) reward = 300;
                        else reward = 500;
                    }
                    alert(`üéÅ –í—ã –ø–æ–ª—É—á–∏–ª–∏ ‚≠ê${reward}`);
                    balance += reward;
                    updateBalance();
                    c.classList.remove("opening");
                }, 1000);
            });
        });

        startBtn.addEventListener("click", startCountdown);
        updateBalance();
    </script>
</body>
</html>
