<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BoxStarX 3D üöÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ë–∏—Ç–≤—ã</title>
    <style>
        /* ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Inter', system-ui, sans-serif;
        }

        body {
            overflow-x: hidden;
            color: white;
            background: #03050a;
        }

        /* 3D –ö–∞–Ω–≤–∞—Å –¥–ª—è —Å–∞–º–æ–ª–µ—Ç–∞ */
        #planeCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* –ó–≤–µ–∑–¥–Ω—ã–π —Ñ–æ–Ω (2D –ø–æ–¥–ª–æ–∂–∫–∞) */
        #starCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: radial-gradient(ellipse at 30% 40%, #0b1120 0%, #03050f 100%);
            display: block;
            pointer-events: none;
        }

        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å */
        .splash-title {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(3rem, 15vw, 6rem);
            font-weight: 900;
            z-index: 2000;
            background: linear-gradient(135deg, #fff6d5, #ffd966, #ffaa33, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 50px rgba(255, 215, 0, 0.8), 0 0 100px rgba(255, 100, 0, 0.5);
            letter-spacing: 10px;
            animation: epicFadeOut 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            white-space: nowrap;
            pointer-events: none;
        }

        @keyframes epicFadeOut {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); filter: blur(0); }
            30% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: blur(0); }
            70% { opacity: 0.5; transform: translate(-50%, -50%) scale(0.8); filter: blur(5px); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.3); filter: blur(15px); visibility: hidden; }
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            padding: 20px 20px 40px;
            backdrop-filter: blur(2px);
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ========== –£–õ–£–ß–®–ï–ù–ù–´–ô HUD ========== */
        .hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: rgba(5, 10, 20, 0.7);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 60px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 215, 0, 0.1) inset;
            flex-wrap: wrap;
            gap: 15px;
        }

        .balance-block {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .balance {
            background: linear-gradient(145deg, #1e2638, #0f1625);
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: 700;
            border: 1px solid #ffd966;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .balance::before {
            content: "‚≠ê";
            font-size: 1.6rem;
            filter: drop-shadow(0 0 10px gold);
        }

        .add-balance {
            background: linear-gradient(135deg, #2e7d32, #1b5e20);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #81c784;
            box-shadow: 0 5px 15px rgba(46, 125, 50, 0.4);
        }

        .add-balance:hover {
            transform: translateY(-3px);
            filter: brightness(1.2);
            box-shadow: 0 15px 25px rgba(46, 125, 50, 0.6);
        }

        .bet-panel {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(0, 0, 0, 0.4);
            padding: 8px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .bet-panel label {
            color: #aaa;
            font-size: 0.95rem;
        }

        .bet-panel input {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #ffd966;
            color: #ffd966;
            padding: 10px 16px;
            border-radius: 40px;
            width: 100px;
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            outline: none;
        }

        .bet-panel input:focus {
            border-color: white;
            box-shadow: 0 0 20px gold;
        }

        .flight-controls {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-start {
            background: linear-gradient(135deg, #f9d423, #fdaa33);
            color: #1a1e2b;
            box-shadow: 0 10px 20px rgba(249, 212, 35, 0.3);
        }

        .btn-start:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 20px 30px rgba(249, 212, 35, 0.5);
        }

        .btn-stop {
            background: linear-gradient(135deg, #dc3545, #b02a37);
            color: white;
            box-shadow: 0 10px 20px rgba(220, 53, 69, 0.3);
        }

        .btn-stop:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 20px 30px rgba(220, 53, 69, 0.5);
        }

        .btn-stop:disabled, .btn-start:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª–µ—Ç–µ */
        .flight-info {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid gold;
            border-radius: 60px;
            padding: 15px 30px;
            margin: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .multiplier {
            color: #ffd966;
            text-shadow: 0 0 20px gold;
            font-size: 2rem;
        }

        /* ========== –ö–ï–ô–°–´ CASE-BATTLE –°–¢–ò–õ–¨ ========== */
        .section-title {
            font-size: 2.2rem;
            font-weight: 800;
            text-align: center;
            margin: 50px 0 30px;
            background: linear-gradient(135deg, #fff, #ffd966, #ffaa33);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .cases-battle {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            perspective: 1200px;
        }

        .battle-case {
            width: 260px;
            background: linear-gradient(145deg, #1e2842, #0e162a);
            border-radius: 30px;
            padding: 25px 15px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid transparent;
            border-image: linear-gradient(135deg, gold, #ff6b6b, #aaffaa);
            border-image-slice: 1;
            box-shadow: 0 30px 40px -20px black, 0 0 0 2px rgba(255,215,0,0.3) inset;
            position: relative;
            transform-style: preserve-3d;
        }

        .battle-case:hover {
            transform: translateY(-20px) rotateX(5deg) rotateY(5deg);
            box-shadow: 0 40px 60px -10px black, 0 0 50px gold;
        }

        .case-glow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.3), transparent 70%);
            border-radius: 30px;
            pointer-events: none;
        }

        .case-icon {
            font-size: 5rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 20px gold);
            transition: transform 0.3s;
        }

        .battle-case:hover .case-icon {
            transform: scale(1.2) rotate(10deg);
        }

        .case-price {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ffd966, #ffaa33);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 10px 0;
        }

        .case-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: #ccc;
            margin-bottom: 15px;
        }

        .case-items-preview {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }

        .preview-item {
            width: 40px;
            height: 40px;
            background: rgba(255,215,0,0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            border: 1px solid gold;
        }

        /* ========== –¢–ï–õ–ï–ì–†–ê–ú –ü–û–î–ê–†–ö–ò ========== */
        .gifts-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .gift-item {
            background: linear-gradient(145deg, #2a2f45, #1a1f30);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            width: 150px;
            border: 2px solid gold;
            transition: all 0.3s;
            cursor: pointer;
        }

        .gift-item:hover {
            transform: scale(1.05);
            border-color: #ffaa33;
            box-shadow: 0 0 30px gold;
        }

        .gift-emoji {
            font-size: 3.5rem;
            filter: drop-shadow(0 0 15px currentColor);
        }

        .gift-name {
            font-weight: bold;
            margin: 10px 0;
            color: gold;
        }

        .gift-price {
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* ========== –ò–ù–í–ï–ù–¢–ê–†–¨ ========== */
        .inventory-section {
            background: rgba(10, 15, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid gold;
        }

        .inventory-title {
            font-size: 2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .inventory-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            min-height: 120px;
        }

        .inventory-slot {
            width: 100px;
            height: 100px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #ffd966;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.2s;
            position: relative;
            cursor: pointer;
        }

        .inventory-slot:hover {
            transform: scale(1.05);
            border-color: white;
            box-shadow: 0 0 20px gold;
        }

        .slot-emoji {
            font-size: 2.5rem;
        }

        .slot-name {
            font-size: 0.7rem;
            text-align: center;
            padding: 0 5px;
        }

        .empty-slot {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed #555;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            box-shadow: 0 10px 30px black;
            border: 1px solid gold;
        }

        @keyframes slideIn {
            from { top: 50px; opacity: 0; }
            to { top: 100px; opacity: 1; }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 700px) {
            .hud {
                flex-direction: column;
                border-radius: 30px;
            }
            .flight-controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- 3D –ö–∞–Ω–≤–∞—Å –¥–ª—è —Å–∞–º–æ–ª–µ—Ç–∞ -->
    <canvas id="planeCanvas"></canvas>
    
    <!-- –ó–≤–µ–∑–¥–Ω—ã–π —Ñ–æ–Ω -->
    <canvas id="starCanvas"></canvas>

    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å -->
    <div class="splash-title">BOXSTARX 3D üöÄ</div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="content">
        <!-- HUD –ø–∞–Ω–µ–ª—å -->
        <div class="hud">
            <div class="balance-block">
                <div class="balance">
                    <span id="balance">1000</span>
                </div>
                <button class="add-balance" id="addBalance">‚ûï +1000</button>
            </div>

            <div class="bet-panel">
                <label>üí∞ –°–¢–ê–í–ö–ê</label>
                <input type="number" id="betAmount" min="10" value="100" step="10">
            </div>

            <div class="flight-controls">
                <button class="btn btn-start" id="startFlight">üöÄ –í–ó–õ–ï–¢</button>
                <button class="btn btn-stop" id="stopFlight" disabled>‚èπÔ∏è –°–¢–û–ü</button>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª–µ—Ç–µ -->
        <div class="flight-info">
            <span>üöÄ –°–¢–ê–¢–£–° –ü–û–õ–ï–¢–ê:</span>
            <span class="multiplier" id="flightStatus">–û–ñ–ò–î–ê–ù–ò–ï</span>
        </div>

        <!-- –ö–µ–π—Å—ã –≤ —Å—Ç–∏–ª–µ Case-Battle -->
        <h2 class="section-title">‚ö° CASE-BATTLE ‚ö°</h2>
        <div class="cases-battle">
            <div class="battle-case" data-case="basic">
                <div class="case-glow"></div>
                <div class="case-icon">üì¶</div>
                <div class="case-name">–ë–ê–ó–û–í–´–ô –ö–ï–ô–°</div>
                <div class="case-price">100‚≠ê</div>
                <div class="case-items-preview">
                    <div class="preview-item">üéÅ</div>
                    <div class="preview-item">üì¶</div>
                    <div class="preview-item">üíé</div>
                </div>
            </div>

            <div class="battle-case" data-case="premium">
                <div class="case-glow"></div>
                <div class="case-icon">üíé</div>
                <div class="case-name">–ü–†–ï–ú–ò–£–ú –ö–ï–ô–°</div>
                <div class="case-price">300‚≠ê</div>
                <div class="case-items-preview">
                    <div class="preview-item">üëë</div>
                    <div class="preview-item">üí´</div>
                    <div class="preview-item">‚ö°</div>
                </div>
            </div>

            <div class="battle-case" data-case="legendary">
                <div class="case-glow"></div>
                <div class="case-icon">üëë</div>
                <div class="case-name">–õ–ï–ì–ï–ù–î–ê–†–ù–´–ô</div>
                <div class="case-price">1000‚≠ê</div>
                <div class="case-items-preview">
                    <div class="preview-item">üî•</div>
                    <div class="preview-item">‚ú®</div>
                    <div class="preview-item">üåü</div>
                </div>
            </div>
        </div>

        <!-- Telegram –ü–æ–¥–∞—Ä–∫–∏ -->
        <h2 class="section-title">üéÅ TELEGRAM –ü–û–î–ê–†–ö–ò</h2>
        <div class="gifts-grid">
            <div class="gift-item" data-gift="star">
                <div class="gift-emoji">‚≠ê</div>
                <div class="gift-name">–ó–≤–µ–∑–¥–∞</div>
                <div class="gift-price">–¶–µ–Ω–∞: 50‚≠ê</div>
            </div>
            <div class="gift-item" data-gift="heart">
                <div class="gift-emoji">‚ù§Ô∏è</div>
                <div class="gift-name">–°–µ—Ä–¥—Ü–µ</div>
                <div class="gift-price">–¶–µ–Ω–∞: 75‚≠ê</div>
            </div>
            <div class="gift-item" data-gift="fire">
                <div class="gift-emoji">üî•</div>
                <div class="gift-name">–û–≥–æ–Ω—å</div>
                <div class="gift-price">–¶–µ–Ω–∞: 100‚≠ê</div>
            </div>
            <div class="gift-item" data-gift="diamond">
                <div class="gift-emoji">üíé</div>
                <div class="gift-name">–ê–ª–º–∞–∑</div>
                <div class="gift-price">–¶–µ–Ω–∞: 200‚≠ê</div>
            </div>
            <div class="gift-item" data-gift="crown">
                <div class="gift-emoji">üëë</div>
                <div class="gift-name">–ö–æ—Ä–æ–Ω–∞</div>
                <div class="gift-price">–¶–µ–Ω–∞: 500‚≠ê</div>
            </div>
        </div>

        <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
        <div class="inventory-section">
            <div class="inventory-title">
                <span>üì¶ –ò–ù–í–ï–ù–¢–ê–†–¨</span>
                <span style="font-size: 1rem; color: gold;">(–Ω–∞–∂–º–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —á—Ç–æ–±—ã –ø—Ä–æ–¥–∞—Ç—å)</span>
            </div>
            <div class="inventory-grid" id="inventoryGrid">
                <!-- –°–ª–æ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                <div class="empty-slot">–ø—É—Å—Ç–æ</div>
                <div class="empty-slot">–ø—É—Å—Ç–æ</div>
                <div class="empty-slot">–ø—É—Å—Ç–æ</div>
                <div class="empty-slot">–ø—É—Å—Ç–æ</div>
                <div class="empty-slot">–ø—É—Å—Ç–æ</div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Three.js –¥–ª—è 3D -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.128.0/build/three.module.js"
            }
        }
    </script>

    <script type="module">
        // ==================== 1. –¢–†–ï–•–ú–ï–†–ù–´–ô –°–ê–ú–û–õ–ï–¢ (3D) ====================
        import * as THREE from 'three';
        import { OrbitControls } from 'https://unpkg.com/three@0.128.0/examples/jsm/controls/OrbitControls.js';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã
        const canvas = document.getElementById('planeCanvas');
        const scene = new THREE.Scene();
        scene.background = null; // –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
        
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 2, 10);
        camera.lookAt(0, 0, 0);
        
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        // –û—Å–≤–µ—â–µ–Ω–∏–µ
        const ambientLight = new THREE.AmbientLight(0x404060);
        scene.add(ambientLight);
        
        const dirLight = new THREE.DirectionalLight(0xffeedd, 1);
        dirLight.position.set(1, 3, 2);
        dirLight.castShadow = true;
        scene.add(dirLight);
        
        const backLight = new THREE.PointLight(0x4466ff, 0.5);
        backLight.position.set(-2, 1, -2);
        scene.add(backLight);

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Å–∞–º–æ–ª–µ—Ç–∞
        const planeGroup = new THREE.Group();

        // –ö–æ—Ä–ø—É—Å (–æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å)
        const bodyGeo = new THREE.CylinderGeometry(0.5, 0.5, 2, 8);
        const bodyMat = new THREE.MeshStandardMaterial({ 
            color: 0x3a6ea5, 
            emissive: 0x112233,
            metalness: 0.7,
            roughness: 0.3,
            emissiveIntensity: 0.2
        });
        const body = new THREE.Mesh(bodyGeo, bodyMat);
        body.rotation.x = Math.PI / 2;
        body.position.z = 0;
        body.castShadow = true;
        body.receiveShadow = true;
        planeGroup.add(body);

        // –ù–æ—Å (–∫–æ–Ω—É—Å)
        const noseGeo = new THREE.ConeGeometry(0.5, 0.8, 8);
        const noseMat = new THREE.MeshStandardMaterial({ color: 0x4a7eb5, metalness: 0.8, roughness: 0.2 });
        const nose = new THREE.Mesh(noseGeo, noseMat);
        nose.position.z = 1.1;
        nose.rotation.x = Math.PI / 2;
        nose.castShadow = true;
        planeGroup.add(nose);

        // –ö—Ä—ã–ª—å—è
        const wingGeo = new THREE.BoxGeometry(2, 0.1, 0.8);
        const wingMat = new THREE.MeshStandardMaterial({ color: 0x2a5a8c, metalness: 0.9, roughness: 0.3 });
        const wings = new THREE.Mesh(wingGeo, wingMat);
        wings.position.y = 0;
        wings.position.z = 0;
        wings.castShadow = true;
        wings.receiveShadow = true;
        planeGroup.add(wings);

        // –•–≤–æ—Å—Ç
        const tailGeo = new THREE.BoxGeometry(0.3, 0.8, 0.8);
        const tailMat = new THREE.MeshStandardMaterial({ color: 0x2a5a8c });
        const tail = new THREE.Mesh(tailGeo, tailMat);
        tail.position.y = 0.5;
        tail.position.z = -0.8;
        tail.castShadow = true;
        planeGroup.add(tail);

        // –¢—É—Ä–±–∏–Ω—ã (—Å–≤–µ—Ç—è—â–∏–µ—Å—è)
        const turbineGeo = new THREE.CylinderGeometry(0.3, 0.3, 0.4, 8);
        const turbineMat = new THREE.MeshStandardMaterial({ 
            color: 0xcccccc, 
            emissive: 0x4466aa,
            emissiveIntensity: 0.8
        });
        
        const turbine1 = new THREE.Mesh(turbineGeo, turbineMat);
        turbine1.position.set(0.6, -0.2, -0.8);
        turbine1.rotation.x = Math.PI / 2;
        planeGroup.add(turbine1);
        
        const turbine2 = new THREE.Mesh(turbineGeo, turbineMat);
        turbine2.position.set(-0.6, -0.2, -0.8);
        turbine2.rotation.x = Math.PI / 2;
        planeGroup.add(turbine2);

        // –°–≤–µ—á–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ —Ç—É—Ä–±–∏–Ω
        const glowGeo = new THREE.SphereGeometry(0.4, 8);
        const glowMat = new THREE.MeshBasicMaterial({ 
            color: 0x4466ff, 
            transparent: true, 
            opacity: 0.3 
        });
        const glow1 = new THREE.Mesh(glowGeo, glowMat);
        glow1.position.set(0.6, -0.2, -1.0);
        planeGroup.add(glow1);
        
        const glow2 = new THREE.Mesh(glowGeo, glowMat);
        glow2.position.set(-0.6, -0.2, -1.0);
        planeGroup.add(glow2);

        // –î–æ–±–∞–≤–ª—è–µ–º —Å–∞–º–æ–ª–µ—Ç –Ω–∞ —Å—Ü–µ–Ω—É
        scene.add(planeGroup);

        // –ó–≤–µ–∑–¥—ã –≤–æ–∫—Ä—É–≥ (–¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –¥–≤–∏–∂–µ–Ω–∏—è)
        const stars = [];
        const starGeometry = new THREE.SphereGeometry(0.05, 4);
        const starMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff, emissive: 0xaaaaff });
        
        for (let i = 0; i < 50; i++) {
            const star = new THREE.Mesh(starGeometry, starMaterial);
            star.position.set(
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 10,
                (Math.random() - 0.5) * 20 - 10
            );
            scene.add(star);
            stars.push(star);
        }

        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∫–∞–º–µ—Ä—É –∏ –≥—Ä—É–ø–ø—É
        planeGroup.position.x = 0;
        planeGroup.position.y = 0;
        planeGroup.scale.set(0.8, 0.8, 0.8);

        // –ê–Ω–∏–º–∞—Ü–∏—è —Å–∞–º–æ–ª–µ—Ç–∞
        let planeOffset = 0;
        let targetX = 0;

        // ==================== 2. –ó–í–ï–ó–î–ù–´–ô –§–û–ù (2D) ====================
        const starCanvas = document.getElementById('starCanvas');
        const ctx = starCanvas.getContext('2d');
        let width, height;
        let stars2D = [];
        let comets = [];
        const STAR_COUNT = 400;
        const COMET_COUNT = 3;

        function initStars2D() {
            stars2D = [];
            for (let i = 0; i < STAR_COUNT; i++) {
                stars2D.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    radius: Math.random() * 2.5 + 0.5,
                    speed: Math.random() * 0.4 + 0.1,
                    brightness: Math.random() * 0.5 + 0.3,
                    flickerSpeed: Math.random() * 0.02 + 0.005,
                    color: `hsl(${Math.random() * 60 + 30}, 80%, 70%)`
                });
            }
        }

        function initComets() {
            comets = [];
            for (let i = 0; i < COMET_COUNT; i++) {
                comets.push({
                    x: Math.random() * width * 0.2,
                    y: Math.random() * height * 0.2,
                    length: Math.random() * 150 + 100,
                    speed: Math.random() * 6 + 5,
                    angle: Math.random() * 0.3 + 0.3
                });
            }
        }

        function resizeCanvas() {
            width = window.innerWidth;
            height = window.innerHeight;
            starCanvas.width = width;
            starCanvas.height = height;
            initStars2D();
            initComets();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º 3D –∫–∞–º–µ—Ä—É
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        }

        function drawStars2D() {
            ctx.clearRect(0, 0, width, height);
            
            // –ú–µ—Ä—Ü–∞—é—â–∏–µ –∑–≤–µ–∑–¥—ã
            stars2D.forEach(star => {
                star.y += star.speed * 0.15;
                if (star.y > height) {
                    star.y = 0;
                    star.x = Math.random() * width;
                }
                
                star.brightness += star.flickerSpeed;
                if (star.brightness > 1 || star.brightness < 0.3) star.flickerSpeed *= -1;
                
                ctx.globalAlpha = star.brightness;
                ctx.fillStyle = star.color;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // –ö–æ–º–µ—Ç—ã
            ctx.globalAlpha = 1;
            ctx.lineWidth = 3;
            comets.forEach(comet => {
                comet.x += comet.speed * Math.cos(comet.angle);
                comet.y += comet.speed * Math.sin(comet.angle);
                
                if (comet.y > height || comet.x > width) {
                    comet.x = Math.random() * width * 0.3;
                    comet.y = Math.random() * height * 0.2;
                }
                
                const gradient = ctx.createLinearGradient(
                    comet.x, comet.y, 
                    comet.x - comet.length * Math.cos(comet.angle), 
                    comet.y - comet.length * Math.sin(comet.angle)
                );
                gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
                gradient.addColorStop(0.3, 'rgba(255, 200, 100, 0.8)');
                gradient.addColorStop(0.7, 'rgba(255, 100, 50, 0.3)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                
                ctx.beginPath();
                ctx.moveTo(comet.x, comet.y);
                ctx.lineTo(
                    comet.x - comet.length * Math.cos(comet.angle), 
                    comet.y - comet.length * Math.sin(comet.angle)
                );
                ctx.strokeStyle = gradient;
                ctx.stroke();
                
                ctx.beginPath();
                ctx.arc(comet.x, comet.y, 5, 0, Math.PI * 2);
                ctx.fillStyle = '#fffbe3';
                ctx.shadowColor = 'gold';
                ctx.shadowBlur = 20;
                ctx.fill();
                ctx.shadowBlur = 0;
            });
        }

        // ==================== 3. –ò–ì–†–û–í–ê–Ø –õ–û–ì–ò–ö–ê ====================
        let balance = 1000;
        let isFlying = false;
        let currentMultiplier = 1;
        let planeInterval = null;
        let betAmount = 100;
        
        // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–º–∞—Å—Å–∏–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤)
        let inventory = [];

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const balanceEl = document.getElementById('balance');
        const betInput = document.getElementById('betAmount');
        const startBtn = document.getElementById('startFlight');
        const stopBtn = document.getElementById('stopFlight');
        const addBalanceBtn = document.getElementById('addBalance');
        const flightStatus = document.getElementById('flightStatus');
        const inventoryGrid = document.getElementById('inventoryGrid');

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function updateBalanceUI() {
            balanceEl.textContent = balance;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'info') {
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.style.background = type === 'success' ? 'linear-gradient(135deg, #2e7d32, #1b5e20)' : 
                                   type === 'error' ? 'linear-gradient(135deg, #b71c1c, #8b0000)' : 
                                   'linear-gradient(135deg, #1976d2, #0d47a1)';
            notif.textContent = message;
            document.body.appendChild(notif);
            
            setTimeout(() => notif.remove(), 2000);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function addToInventory(item) {
            inventory.push(item);
            updateInventoryUI();
            showNotification(`üéÅ –ü–æ–ª—É—á–µ–Ω: ${item.name}`, 'success');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventoryUI() {
            inventoryGrid.innerHTML = '';
            
            if (inventory.length === 0) {
                for (let i = 0; i < 5; i++) {
                    const empty = document.createElement('div');
                    empty.className = 'empty-slot';
                    empty.textContent = '–ø—É—Å—Ç–æ';
                    inventoryGrid.appendChild(empty);
                }
                return;
            }
            
            inventory.forEach((item, index) => {
                const slot = document.createElement('div');
                slot.className = 'inventory-slot';
                slot.innerHTML = `
                    <div class="slot-emoji">${item.emoji}</div>
                    <div class="slot-name">${item.name}</div>
                `;
                slot.addEventListener('click', () => sellItem(index));
                inventoryGrid.appendChild(slot);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã
            for (let i = inventory.length; i < 8; i++) {
                const empty = document.createElement('div');
                empty.className = 'empty-slot';
                empty.textContent = '–ø—É—Å—Ç–æ';
                inventoryGrid.appendChild(empty);
            }
        }

        // –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
        function sellItem(index) {
            const item = inventory[index];
            const sellPrice = Math.floor(item.price * 0.7); // –ü—Ä–æ–¥–∞–∂–∞ –∑–∞ 70% —Ü–µ–Ω—ã
            balance += sellPrice;
            inventory.splice(index, 1);
            updateBalanceUI();
            updateInventoryUI();
            showNotification(`‚úÖ –ü—Ä–æ–¥–∞–Ω ${item.name} –∑–∞ ${sellPrice}‚≠ê`, 'success');
        }

        // ========== –õ–û–ì–ò–ö–ê –ü–û–õ–ï–¢–ê ==========
        function startCountdown() {
            if (isFlying) return;
            
            flightStatus.textContent = '–í–ó–õ–ï–¢ –ß–ï–†–ï–ó 3...';
            startBtn.disabled = true;
            
            setTimeout(() => {
                flightStatus.textContent = '–í–ó–õ–ï–¢ –ß–ï–†–ï–ó 2...';
            }, 1000);
            
            setTimeout(() => {
                flightStatus.textContent = '–í–ó–õ–ï–¢ –ß–ï–†–ï–ó 1...';
            }, 2000);
            
            setTimeout(() => {
                startFlight();
            }, 3000);
        }

        function startFlight() {
            const bet = parseInt(betInput.value);
            
            if (bet > balance) {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥!', 'error');
                startBtn.disabled = false;
                flightStatus.textContent = '–û–ñ–ò–î–ê–ù–ò–ï';
                return;
            }
            
            if (bet < 10) {
                showNotification('‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 10‚≠ê', 'error');
                startBtn.disabled = false;
                flightStatus.textContent = '–û–ñ–ò–î–ê–ù–ò–ï';
                return;
            }
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º —Å—Ç–∞–≤–∫—É
            balance -= bet;
            updateBalanceUI();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ—Ç
            isFlying = true;
            currentMultiplier = 1.0;
            stopBtn.disabled = false;
            flightStatus.textContent = 'üöÄ –ü–û–õ–ï–¢... x1.00';
            
            // –ê–Ω–∏–º–∞—Ü–∏—è 3D —Å–∞–º–æ–ª–µ—Ç–∞ - —É—Å–∫–æ—Ä—è–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ —Ç—É—Ä–±–∏–Ω
            let flightTime = 0;
            
            planeInterval = setInterval(() => {
                flightTime += 0.1;
                currentMultiplier += 0.03 + Math.random() * 0.02;
                flightStatus.textContent = `üöÄ –ú–Ω–æ–∂–∏—Ç–µ–ª—å: x${currentMultiplier.toFixed(2)}`;
                
                // –î–≤–∏–≥–∞–µ–º 3D —Å–∞–º–æ–ª–µ—Ç –≤–ø–µ—Ä–µ–¥
                planeGroup.position.x += 0.05;
                
                // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–ª–µ—Ç–∞
                turbine1.material.emissiveIntensity = 0.8 + Math.random() * 0.4;
                turbine2.material.emissiveIntensity = 0.8 + Math.random() * 0.4;
                
                // –°–ª—É—á–∞–π–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ (—à–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º)
                const crashChance = 0.002 + (flightTime * 0.0005);
                
                // –ï—Å–ª–∏ —Å–∞–º–æ–ª–µ—Ç —É–ª–µ—Ç–µ–ª —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –∏–ª–∏ —É–ø–∞–ª - –ü–†–û–ò–ì–†–´–®
                if (planeGroup.position.x > 8 || Math.random() < crashChance) {
                    // –ü–†–û–ò–ì–†–´–® - —Å—Ç–∞–≤–∫–∞ —Å–≥–æ—Ä–∞–µ—Ç
                    clearInterval(planeInterval);
                    planeInterval = null;
                    
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∞–º–æ–ª–µ—Ç
                    planeGroup.position.x = 0;
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
                    turbine1.material.emissiveIntensity = 0.8;
                    turbine2.material.emissiveIntensity = 0.8;
                    
                    isFlying = false;
                    stopBtn.disabled = true;
                    startBtn.disabled = false;
                    
                    flightStatus.textContent = 'üí• –°–ê–ú–û–õ–ï–¢ –£–ü–ê–õ';
                    showNotification(`üí• –ü—Ä–æ–∏–≥—Ä—ã—à: ${bet}‚≠ê`, 'error');
                }
            }, 100);
        }

        function stopFlight() {
            if (!isFlying) return;
            
            clearInterval(planeInterval);
            planeInterval = null;
            
            // –í–´–ò–ì–†–´–® —Å —Ç–µ–∫—É—â–∏–º –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º
            const bet = parseInt(betInput.value);
            const win = Math.floor(bet * currentMultiplier);
            balance += win;
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∞–º–æ–ª–µ—Ç
            planeGroup.position.x = 0;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
            turbine1.material.emissiveIntensity = 0.8;
            turbine2.material.emissiveIntensity = 0.8;
            
            isFlying = false;
            stopBtn.disabled = true;
            startBtn.disabled = false;
            
            flightStatus.textContent = '‚úÖ –£–°–ü–ï–®–ù–ê–Ø –ü–û–°–ê–î–ö–ê';
            showNotification(`‚ú® –í—ã–∏–≥—Ä—ã—à: ${win}‚≠ê (x${currentMultiplier.toFixed(2)})`, 'success');
            updateBalanceUI();
        }

        // ========== –ö–ï–ô–°–´ ==========
        function openCase(caseType) {
            let cost = 0;
            let possibleRewards = [];
            
            switch(caseType) {
                case 'basic':
                    cost = 100;
                    possibleRewards = [
                        { emoji: 'üéÅ', name: '–ü–æ–¥–∞—Ä–æ–∫', price: 30, chance: 40 },
                        { emoji: '‚≠ê', name: '–ó–≤–µ–∑–¥–∞', price: 50, chance: 30 },
                        { emoji: 'üì¶', name: '–ö–æ—Ä–æ–±–∫–∞', price: 80, chance: 20 },
                        { emoji: 'üíé', name: '–ê–ª–º–∞–∑', price: 200, chance: 10 }
                    ];
                    break;
                case 'premium':
                    cost = 300;
                    possibleRewards = [
                        { emoji: 'üí´', name: '–ö–æ–º–µ—Ç–∞', price: 150, chance: 35 },
                        { emoji: '‚ö°', name: '–ú–æ–ª–Ω–∏—è', price: 250, chance: 30 },
                        { emoji: 'üëë', name: '–ö–æ—Ä–æ–Ω–∞', price: 400, chance: 20 },
                        { emoji: 'üåü', name: '–°—É–ø–µ—Ä–∑–≤–µ–∑–¥–∞', price: 800, chance: 15 }
                    ];
                    break;
                case 'legendary':
                    cost = 1000;
                    possibleRewards = [
                        { emoji: 'üî•', name: '–ü–ª–∞–º—è', price: 500, chance: 30 },
                        { emoji: '‚ú®', name: '–ú–∞–≥–∏—è', price: 800, chance: 25 },
                        { emoji: 'üöÄ', name: '–†–∞–∫–µ—Ç–∞', price: 1500, chance: 25 },
                        { emoji: 'üëæ', name: '–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∏–Ω', price: 3000, chance: 20 }
                    ];
                    break;
            }
            
            if (balance < cost) {
                showNotification(`‚ùå –ù—É–∂–Ω–æ ${cost}‚≠ê`, 'error');
                return;
            }
            
            balance -= cost;
            updateBalanceUI();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è (–≤–∏–∑—É–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å—Å)
            const cases = document.querySelectorAll('.battle-case');
            cases.forEach(c => {
                if (c.dataset.case === caseType) {
                    c.style.transform = 'scale(1.1) rotateY(180deg)';
                    setTimeout(() => {
                        c.style.transform = '';
                    }, 500);
                }
            });
            
            // –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
            setTimeout(() => {
                const rand = Math.random() * 100;
                let cumulative = 0;
                let selected = possibleRewards[0];
                
                for (const reward of possibleRewards) {
                    cumulative += reward.chance;
                    if (rand <= cumulative) {
                        selected = reward;
                        break;
                    }
                }
                
                addToInventory(selected);
            }, 500);
        }

        // ========== –ü–û–ö–£–ü–ö–ê –ü–û–î–ê–†–ö–û–í ==========
        function buyGift(giftType) {
            let cost = 0;
            let gift = {};
            
            switch(giftType) {
                case 'star':
                    cost = 50;
                    gift = { emoji: '‚≠ê', name: '–ó–≤–µ–∑–¥–∞', price: 50 };
                    break;
                case 'heart':
                    cost = 75;
                    gift = { emoji: '‚ù§Ô∏è', name: '–°–µ—Ä–¥—Ü–µ', price: 75 };
                    break;
                case 'fire':
                    cost = 100;
                    gift = { emoji: 'üî•', name: '–û–≥–æ–Ω—å', price: 100 };
                    break;
                case 'diamond':
                    cost = 200;
                    gift = { emoji: 'üíé', name: '–ê–ª–º–∞–∑', price: 200 };
                    break;
                case 'crown':
                    cost = 500;
                    gift = { emoji: 'üëë', name: '–ö–æ—Ä–æ–Ω–∞', price: 500 };
                    break;
            }
            
            if (balance < cost) {
                showNotification(`‚ùå –ù—É–∂–Ω–æ ${cost}‚≠ê`, 'error');
                return;
            }
            
            balance -= cost;
            updateBalanceUI();
            addToInventory(gift);
        }

        // ========== –ê–ù–ò–ú–ê–¶–ò–Ø ==========
        function animate() {
            requestAnimationFrame(animate);
            
            // –í—Ä–∞—â–∞–µ–º —Ç—É—Ä–±–∏–Ω—ã
            if (turbine1 && turbine2) {
                turbine1.rotation.y += 0.1;
                turbine2.rotation.y += 0.1;
            }
            
            // –î–≤–∏–≥–∞–µ–º –∑–≤–µ–∑–¥—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –≥–ª—É–±–∏–Ω—ã
            stars.forEach(star => {
                star.position.z += 0.02;
                if (star.position.z > 10) {
                    star.position.z = -10;
                }
            });
            
            // –†–µ–Ω–¥–µ—Ä–∏–º 3D —Å—Ü–µ–Ω—É
            renderer.render(scene, camera);
            
            // –†–∏—Å—É–µ–º 2D –∑–≤–µ–∑–¥—ã
            drawStars2D();
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        animate();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        startBtn.addEventListener('click', startCountdown);
        stopBtn.addEventListener('click', stopFlight);
        addBalanceBtn.addEventListener('click', () => {
            balance += 1000;
            updateBalanceUI();
            showNotification('+1000‚≠ê –ø–æ–ª—É—á–µ–Ω–æ!', 'success');
        });

        // –ö–µ–π—Å—ã
        document.querySelectorAll('.battle-case').forEach(c => {
            c.addEventListener('click', () => openCase(c.dataset.case));
        });

        // –ü–æ–¥–∞—Ä–∫–∏
        document.querySelectorAll('.gift-item').forEach(g => {
            g.addEventListener('click', () => buyGift(g.dataset.gift));
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI
        updateBalanceUI();
        updateInventoryUI();
        flightStatus.textContent = '–û–ñ–ò–î–ê–ù–ò–ï';

        // –î–æ–±–∞–≤–∏–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –¥–ª—è –¥–µ–º–æ
        setTimeout(() => {
            addToInventory({ emoji: '‚≠ê', name: '–ó–≤–µ–∑–¥–∞', price: 50 });
            addToInventory({ emoji: 'üî•', name: '–û–≥–æ–Ω—å', price: 100 });
        }, 1000);
    </script>
</body>
</html>
